
export const publicmethod = {
	icondata: [{
			imgurl: require('../assets/arclist/35.gif'),
			code: ":,@!",
			label: '[哀]'
		},
		{
			imgurl: require('../assets/arclist/1.gif'),
			code: '::)',
			label: '[微笑]'
		},
		{
			imgurl: require('../assets/arclist/2.gif'),
			code: '::~',
			label: '[撇嘴]'
		},
		{
			imgurl: require('../assets/arclist/3.gif'),
			code: '::B',
			label: '[色]'
		},
		{
			imgurl: require('../assets/arclist/4.gif'),
			code: '::|',
			label: '[发呆]'
		},
		{
			imgurl: require('../assets/arclist/5.gif'),
			code: '::<',
			label: '[流泪]'
		},
		{
			imgurl: require('../assets/arclist/6.gif'),
			code: '::$',
			label: '[害羞]'
		},
		{
			imgurl: require('../assets/arclist/7.gif'),
			code: '::X',
			label: '[闭嘴]'
		},
		{
			imgurl: require('../assets/arclist/8.gif'),
			code: '::Z',
			label: '[睡]'
		},
		{
			imgurl: require('../assets/arclist/9.gif'),
			code: "::'(",
			label: '[大哭]'
		},
		{
			imgurl: require('../assets/arclist/10.gif'),
			code: "::-|",
			label: '[尴尬]'
		},
		{
			imgurl: require('../assets/arclist/11.gif'),
			code: "::@",
			label: '[怒]'
		},
		{
			imgurl: require('../assets/arclist/12.gif'),
			code: "::P",
			label: '[调皮]'
		},
		{
			imgurl: require('../assets/arclist/13.gif'),
			code: "::D",
			label: '[笑]'
		},
		{
			imgurl: require('../assets/arclist/14.gif'),
			code: "::O",
			label: '[惊讶]'
		},
		{
			imgurl: require('../assets/arclist/15.gif'),
			code: "::(",
			label: '[不开心]'
		},
		{
			imgurl: require('../assets/arclist/16.gif'),
			code: "[囧]",
			label: '[囧]'
		},
		{
			imgurl: require('../assets/arclist/17.gif'),
			code: "::Q",
			label: '[抓狂]'
		},
		{
			imgurl: require('../assets/arclist/18.gif'),
			code: "::T",
			label: '[吐]'
		},
		{
			imgurl: require('../assets/arclist/19.gif'),
			code: ":,@P",
			label: '[偷笑]'
		},
		{
			imgurl: require('../assets/arclist/20.gif'),
			code: ":,@-D",
			label: '[愉快]'
		},
		{
			imgurl: require('../assets/arclist/21.gif'),
			code: "::d",
			label: '[白眼]'
		},
		{
			imgurl: require('../assets/arclist/23.gif'),
			code: "::g",
			label: '[饿]'
		},
		{
			imgurl: require('../assets/arclist/24.gif'),
			code: ":|-)",
			label: '[累]'
		},
		{
			imgurl: require('../assets/arclist/25.gif'),
			code: "::!",
			label: '[惊恐]'
		},
		{
			imgurl: require('../assets/arclist/26.gif'),
			code: "::L",
			label: '[流汗]'
		},
		{
			imgurl: require('../assets/arclist/27.gif'),
			code: "::>",
			label: '[高兴]'
		},
		{
			imgurl: require('../assets/arclist/28.gif'),
			code: "::,@",
			label: '[闲]'
		},
		{
			imgurl: require('../assets/arclist/29.gif'),
			code: ":,@f",
			label: '[努力]'
		},
		{
			imgurl: require('../assets/arclist/30.gif'),
			code: "::-S",
			label: '[咒骂]'
		},
		{
			imgurl: require('../assets/arclist/31.gif'),
			code: ":?",
			label: '[疑问]'
		},
		{
			imgurl: require('../assets/arclist/32.gif'),
			code: ":,@x",
			label: '[嘘]'
		},
		{
			imgurl: require('../assets/arclist/33.gif'),
			code: ":,@@",
			label: '[晕]'
		},
		{
			imgurl: require('../assets/arclist/34.gif'),
			code: "::8",
			label: '[疯了]'
		},
		{
			imgurl: require('../assets/arclist/36.gif'),
			code: ":xx",
			label: '[敲打]'
		},
		{
			imgurl: require('../assets/arclist/37.gif'),
			code: ":bye",
			label: '[再见]'
		},
		{
			imgurl: require('../assets/arclist/38.gif'),
			code: ":wipe",
			label: '[擦汗]'
		},
		{
			imgurl: require('../assets/arclist/39.gif'),
			code: ":dig",
			label: '[抠鼻]'
		},
		{
			imgurl: require('../assets/arclist/40.gif'),
			code: ":&-(",
			label: '[糗大了]'
		},
		{
			imgurl: require('../assets/arclist/41.gif'),
			code: ":B-)",
			label: '[坏笑]'
		},
		{
			imgurl: require('../assets/arclist/42.gif'),
			code: ":<@",
			label: '[右哼哼]'
		},
		{
			imgurl: require('../assets/arclist/43.gif'),
			code: ":@>",
			label: '[左哼哼]'
		},
		{
			imgurl: require('../assets/arclist/44.gif'),
			code: "::-O",
			label: '[打哈欠]'
		},
		{
			imgurl: require('../assets/arclist/45.gif'),
			code: ":>-|",
			label: '[看]'
		},
		{
			imgurl: require('../assets/arclist/46.gif'),
			code: ":P-(",
			label: '[委屈]'
		},
		{
			imgurl: require('../assets/arclist/47.gif'),
			code: "::'|",
			label: '[难过]'
		},
		{
			imgurl: require('../assets/arclist/48.gif'),
			code: ":X-)",
			label: '[坏]'
		},
		{
			imgurl: require('../assets/arclist/49.gif'),
			code: "::*",
			label: '[亲]'
		},
		{
			imgurl: require('../assets/arclist/50.gif'),
			code: ":@x",
			label: '[惊吓]'
		},
		{
			imgurl: require('../assets/arclist/51.gif'),
			code: ":8*",
			label: '[可怜]'
		},
		{
			imgurl: require('../assets/arclist/52.gif'),
			code: ":hug",
			label: '[抱抱]'
		},
		{
			imgurl: require('../assets/arclist/53.gif'),
			code: ":moon",
			label: '[月亮]'
		},
		{
			imgurl: require('../assets/arclist/54.gif'),
			code: ":sun",
			label: '[太阳]'
		},
		{
			imgurl: require('../assets/arclist/55.gif'),
			code: ":bome",
			label: '[炸弹]'
		},
		{
			imgurl: require('../assets/arclist/56.gif'),
			code: ":!!!",
			label: '[骷髅]'
		},
		{
			imgurl: require('../assets/arclist/57.gif'),
			code: ":pd",
			label: '[菜刀]'
		},
		{
			imgurl: require('../assets/arclist/58.gif'),
			code: ":pig",
			label: '[猪头]'
		},
		{
			imgurl: require('../assets/arclist/60.gif'),
			code: ":coffee",
			label: '[咖啡]'
		},
		{
			imgurl: require('../assets/arclist/61.gif'),
			code: ":eat",
			label: '[吃饭]'
		},
		{
			imgurl: require('../assets/arclist/62.gif'),
			code: ":heart",
			label: '[爱心]'
		},
		{
			imgurl: require('../assets/arclist/63.gif'),
			code: ":strong",
			label: '[强]'
		},
		{
			imgurl: require('../assets/arclist/64.gif'),
			code: ":weak",
			label: '[弱]'
		},
		{
			imgurl: require('../assets/arclist/65.gif'),
			code: ":share",
			label: '[握手]'
		},
		{
			imgurl: require('../assets/arclist/66.gif'),
			code: ":v",
			label: '[胜利]'
		},
		{
			imgurl: require('../assets/arclist/67.gif'),
			code: ":@)",
			label: '[抱拳]'
		},
		{
			imgurl: require('../assets/arclist/68.gif'),
			code: ":jj",
			label: '[勾引]'
		},
		{
			imgurl: require('../assets/arclist/69.gif'),
			code: ":ok",
			label: '[ok]'
		},
		{
			imgurl: require('../assets/arclist/70.gif'),
			code: ":no",
			label: '[no]'
		},
		{
			imgurl: require('../assets/arclist/71.gif'),
			code: ":rose",
			label: '[玫瑰]'
		},
		{
			imgurl: require('../assets/arclist/72.gif'),
			code: ":fade",
			label: '[凋谢]'
		},
		{
			imgurl: require('../assets/arclist/73.gif'),
			code: ":showlove",
			label: '[嘴唇]'
		},
		{
			imgurl: require('../assets/arclist/74.gif'),
			code: ":love",
			label: '[爱情]'
		},
		{
			imgurl: require('../assets/arclist/75.gif'),
			code: ":<L>",
			label: '[飞吻]'
		},
		{
			imgurl: require('../assets/arclist/22.gif'),
			code: ":,@",
			label: '[傲]'
		},
		{
			imgurl: require('../assets/arclist/59.gif'),
			code: ":<W>",
			label: '[西瓜]'
		},
	],

	backlogin: function(_this) {
		if (!sessionStorage.getItem('vuex') || JSON.parse(sessionStorage.getItem('vuex')).serverModule.userInfo == null) {
				sessionStorage.clear();
				_this.$router.replace({
					name: 'login'
				});
				return false;
		}else{
			return true;
		}
	},
	handletime: function(time, _this) {

		let oldtimearry = [];
		let newstimearry = [];
		let todaytime;

		let Dates = new Date();
		let Seconds = Dates.getSeconds() < 10 ? '0' + Dates.getSeconds() : Dates.getSeconds();
		let Minutes = Dates.getMinutes() < 10 ? '0' + Dates.getMinutes() : Dates.getMinutes();
		let Hours = Dates.getHours() < 10 ? '0' + Dates.getHours() : Dates.getHours();
		let Day = Dates.getDate() < 10 ? '0' + Dates.getDate() : Dates.getDate();
		let Monthly = Dates.getMonth() < 10 ? '0' + (Dates.getMonth() + 1) : Dates.getMonth();
		let Year = Dates.getFullYear() < 10 ? '0' + Dates.getFullYear() : Dates.getFullYear();

		oldtimearry.push(_this.writetime.split(' ')[0].split('-')[0]) //年
		oldtimearry.push(_this.writetime.split(' ')[0].split('-')[1]) //月
		oldtimearry.push(_this.writetime.split(' ')[0].split('-')[2]) //日
		oldtimearry.push(_this.writetime.split(' ')[1].split(':')[0]) //时
		oldtimearry.push(_this.writetime.split(' ')[1].split(':')[1]) //分
		oldtimearry.push(_this.writetime.split(' ')[1].split(':')[2]) //秒

		if (time.split(' ').length <= 1) {
			todaytime = Year + '-' + Monthly + '-' + Day + ' ' + Hours + ':' + Minutes + ':' + Seconds;
		} else {
			todaytime = time;
		}
		newstimearry.push(todaytime.split(' ')[0].split('-')[0]) //年
		newstimearry.push(todaytime.split(' ')[0].split('-')[1]) //月
		newstimearry.push(todaytime.split(' ')[0].split('-')[2]) //日
		newstimearry.push(todaytime.split(' ')[1].split(':')[0]) //时
		newstimearry.push(todaytime.split(' ')[1].split(':')[1]) //分
		newstimearry.push(todaytime.split(' ')[1].split(':')[2]) //秒
		/* 时间处理对比 */
		_this.writetime = todaytime;
		if (Year != newstimearry[0] || Monthly != newstimearry[1] || Day != newstimearry[2]) {
			for (let i = 0; i < oldtimearry.length - 1; i++) {
				if (oldtimearry[i] != newstimearry[i]) {
					_this.writetime = todaytime;
					return todaytime.split(' ')[0].split('-')[0] + '-' + todaytime.split(' ')[0].split('-')[1] + '-' + todaytime.split(
						' ')[0].split('-')[2] + ' ' + todaytime.split(' ')[1].split(':')[0] + ':' + todaytime.split(' ')[1].split(':')[
						1];
					// return todaytime.split(' ')[0].split('-')[0] + '-' + todaytime.split(' ')[0].split('-')[1] + '-' + todaytime.split(
					// 	' ')[0].split('-')[2] + ' ' + todaytime.split(' ')[1].split(':')[0] + ':' + todaytime.split(' ')[1].split(':')[
					// 	1] + ':' +todaytime.split(' ')[1].split(':')[2] ;
					break;
				}
			}
		} else {
			for (let i = 0; i < oldtimearry.length - 1; i++) { /* 是当天,时间间隔一分钟显示 */
				if (oldtimearry[i] != newstimearry[i]) {
					_this.writetime = todaytime;
					// return todaytime.split(' ')[1].split(':')[0] + ':' + todaytime.split(' ')[1].split(':')[1]+':'+todaytime.split(' ')[1].split(':')[2];
					return todaytime.split(' ')[1].split(':')[0] + ':' + todaytime.split(' ')[1].split(':')[1];
					break;
				}
			}
		}
	},

	getTime: function(_this) {

		let Dates = new Date();
		let Seconds = Dates.getSeconds() < 10 ? '0' + Dates.getSeconds() : Dates.getSeconds();
		let Minutes = Dates.getMinutes() < 10 ? '0' + Dates.getMinutes() : Dates.getMinutes();
		let Hours = Dates.getHours() < 10 ? '0' + Dates.getHours() : Dates.getHours();
		let Day = Dates.getDate() < 10 ? '0' + Dates.getDate() : Dates.getDate();
		let Monthly = Dates.getMonth() < 10 ? '0' + (Dates.getMonth() + 1) : Dates.getMonth();
		let Year = Dates.getFullYear() < 10 ? '0' + Dates.getFullYear() : Dates.getFullYear();
		/* 处理时间 */
		return this.handletime(Year + '-' + Monthly + '-' + Day + ' ' + Hours + ':' + Minutes + ':' + Seconds, _this);
	},
	getNowTime: function() {
		let Dates = new Date();
		let Seconds = Dates.getSeconds() < 10 ? '0' + Dates.getSeconds() : Dates.getSeconds();
		let Minutes = Dates.getMinutes() < 10 ? '0' + Dates.getMinutes() : Dates.getMinutes();
		let Hours = Dates.getHours() < 10 ? '0' + Dates.getHours() : Dates.getHours();
		let Day = Dates.getDate() < 10 ? '0' + Dates.getDate() : Dates.getDate();
		let Monthly = Dates.getMonth() < 10 ? '0' + (Dates.getMonth() + 1) : Dates.getMonth();
		let Year = Dates.getFullYear() < 10 ? '0' + Dates.getFullYear() : Dates.getFullYear();
		/* 处理时间 */
		return Year + '-' + Monthly + '-' + Day + ' ' + Hours + ':' + Minutes + ':' + Seconds;
	},
	expression: function(text) {
		let _that = this;
		if (text == null || text == '') {
			return '';
		}
		let msg = text.split('/');
		let msgarry = [];
		msg.forEach(function(values, indexs) {
			let str = values;
			_that.icondata.forEach(function(value, index) {
				str = str.replace(value.code, '<img src="' + value.imgurl + '" style="width:15px;height:15px;">');
			});
			msgarry.push(str);
		})
		return msgarry.join('');
	},

	chartlsithandle: function(time) {
		let Dates = new Date();
		let Day = Dates.getDate() < 10 ? '0' + Dates.getDate() : Dates.getDate();
		let Monthly = Dates.getMonth() < 10 ? '0' + (Dates.getMonth() + 1) : Dates.getMonth();
		let Year = Dates.getFullYear() < 10 ? '0' + Dates.getFullYear() : Dates.getFullYear();
		let nowtime = time;
		let nowyear = nowtime.split(' ')[0].split('-')[0];
		let nowMonthly = nowtime.split(' ')[0].split('-')[1];
		let nowDay = nowtime.split(' ')[0].split('-')[2];

		if (Year == nowyear && Monthly == nowMonthly && Day == nowDay) {
			return nowtime.split(' ')[1].split(':')[0] + ':' + nowtime.split(' ')[1].split(':')[1];
		} else {
			return nowtime.split(' ')[0].split('-')[0] + '-' + nowtime.split(' ')[0].split('-')[1] + '-' + nowtime.split(
				' ')[0].split('-')[2] + ' ' + nowtime.split(' ')[1].split(':')[0] + ':' + nowtime.split(' ')[1].split(':')[
				1];
		}


	},

	filecompression: function(file, _that) {
		let scale = (1.5 / (file.size / Math.pow(1024, 2))).toFixed(6);
		if (scale >= 1) {
			scale = 1;
		}
		let reader = new FileReader();
		let image = new Image();
		reader.readAsDataURL(file);
		reader.onload = function(ev) {
			image.src = ev.target.result;
			image.onload = function() {
				let imgWidth = this.width * scale,
					imgHeight = this.height * scale;
				let canvas = document.createElement('canvas');
				let ctx = canvas.getContext('2d');
				canvas.width = imgWidth;
				canvas.height = imgHeight;
				ctx.drawImage(this, 0, 0, imgWidth, imgHeight);
				/* 图片压缩方法需要在调用 base64 监听变化上传图片*/
				_that.base64 = canvas.toDataURL(file.type, 0.9);
			}
		}
	},
}
