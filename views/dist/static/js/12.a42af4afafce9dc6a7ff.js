webpackJsonp([12],{"1Mu6":function(t,e){},icen:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("p4Oo"),i=a.n(s),l=a("CGGE"),n=a("d1n3"),o=a("fXyh"),r={components:{workorderdetail:n.a},name:"Idealwith",data:function(){return{tablabel:"未完成",tabBoxdata:[{label:"全部",value:4,actiuve:!1},{label:"未完成",value:1,actiuve:!0},{label:"已完成",value:2,actiuve:!1},{label:"已关闭",value:3,actiuve:!1}],oldindex:1,tableData:[],pagesize:12,total:0,selectInput:"",affirmedselectInput:"",billtypevalue:"",billtype:[],datavalue:"",pickerOptions:{shortcuts:[{text:"最近一周",onClick:function(t){var e=new Date,a=new Date;a.setTime(a.getTime()-6048e5),t.$emit("pick",[a,e])}},{text:"最近一个月",onClick:function(t){var e=new Date,a=new Date;a.setTime(a.getTime()-2592e6),t.$emit("pick",[a,e])}},{text:"最近三个月",onClick:function(t){var e=new Date,a=new Date;a.setTime(a.getTime()-7776e6),t.$emit("pick",[a,e])}}]},workorderdetail:!1,type:2,status:1,pageindex:1,rows:12,relaunchedVisible:!1,deptStaffInfo:null,deptStaffInfovalue:"",deptStaffDtos:null,deptStaffDtosvlaue:"",woTypes:null,woTypesvalue:"",billtextarea:"",titleValue:"",radio:""}},created:function(){},mounted:function(){l.a.backlogin(this)&&this.init()},methods:i()({},Object(o.c)("serverModule",{SETLOAD:"SETLOAD"}),{init:function(){this.getbilllist(this.type,this.status,this.affirmedselectInput,this.datavalue,this.billtypevalue,this.pageindex,this.rows)},actiuvetab:function(t,e){t!=this.oldindex&&(this.tabBoxdata[this.oldindex].actiuve=!1,this.tabBoxdata[t].actiuve=!0,this.oldindex=t,this.status=e,this.tablabel=this.tabBoxdata[t].label,this.selectInput="",this.affirmedselectInput="",this.datavalue="",this.billtypevalue="",this.pageindex=1,this.getbilllist(this.type,this.status,this.affirmedselectInput,this.datavalue,this.billtypevalue,this.pageindex,this.rows))},change:function(t){this.pageindex=t,this.getbilllist(this.type,this.status,this.affirmedselectInput,this.datavalue,this.billtypevalue,this.pageindex,this.rows)},clearIntput:function(){this.selectInput="",""!=this.affirmedselectInput&&(this.affirmedselectInput="",this.pageindex=1,this.getbilllist(this.type,this.status,this.affirmedselectInput,this.datavalue,this.billtypevalue,this.pageindex,this.rows))},inputchange:function(){""!=this.selectInput.replace(/ /g,"")?(this.affirmedselectInput=this.selectInput,this.pageindex=1,this.getbilllist(this.type,this.status,this.affirmedselectInput,this.datavalue,this.billtypevalue,this.pageindex,this.rows)):this.$message("请输入搜索的内容")},datechange:function(t){null==t&&(this.datavalue=""),this.pageindex=1,this.getbilllist(this.type,this.status,this.affirmedselectInput,this.datavalue,this.billtypevalue,this.pageindex,this.rows)},billtypechange:function(t){this.pageindex=1,null==t&&(this.billtypevalue=""),this.getbilllist(this.type,this.status,this.affirmedselectInput,this.datavalue,this.billtypevalue,this.pageindex,this.rows)},showbillDetail:function(t,e){var a=this;this.workorderdetail=!0,this.SETLOAD(!0),this.$nextTick(function(){setTimeout(function(){a.$refs.workorderdetail.getDetaildata(t,e,a.type)},300)})},closeworkorderdetail:function(){this.workorderdetail=!1,this.getbilllist(this.type,this.status,this.affirmedselectInput,this.datavalue,this.billtypevalue,this.pageindex,this.rows)},resetlist:function(){this.tablabel="未完成",this.tabBoxdata.forEach(function(t,e){t.actiuve=!1}),this.tabBoxdata[0].actiuve=!0,this.oldindex=0,this.selectInput="",this.affirmedselectInput="",this.billtypevalue=" ",this.datavalue="",this.status=4,this.pageindex=1,this.getbilllist(this.type,this.status,this.affirmedselectInput,this.datavalue,this.billtypevalue,this.pageindex,this.rows),this.workorderdetail=!1},getbilllist:function(t,e,a,s,i,l,n){var o=this,r=null==s?"":s;this.SETLOAD(!0),this.$api.server.billlist(t,e,a,r,i,l,n).then(function(t){1e4==t.status?(o.total=t.data.listData.iTotalRecords,o.tableData=t.data.listData.data,o.billtype.length<=0&&(o.billtype=t.data.woTypes),o.$nextTick(function(){o.SETLOAD(!1)})):(o.SETLOAD(!1),3e4==t.status?o.$message.error(t.message):o.$message.error("未能接收到规定的Josn返回格式!"))})},relaunched:function(){this.relaunchedVisible=!0,this.getbilltypeandhandles()},relaunchedconfirm:function(){var t=this;""!=this.deptStaffInfovalue&&""!=this.deptStaffDtosvlaue&&""!=this.woTypesvalue&&""!=this.billtextarea&&""!=this.titleValue&&""!=this.radio?(this.relaunchedVisible=!1,this.SETLOAD(!0),this.$api.server.addWorkOrder(this.woTypesvalue,this.radio,this.titleValue,this.billtextarea,"",this.deptStaffDtosvlaue,"").then(function(e){1e4==e.status?(t.SETLOAD(!1),t.$message.success(e.message),t.relaunchedClose()):(t.SETLOAD(!1),t.relaunchedClose(),3e4==e.status?t.$message.error(e.message):t.$message.error("未能接收到规定的Josn返回格式!"))})):this.$message.warning("请填写完成的信息!")},relaunchedClose:function(){this.relaunchedVisible=!1,this.deptStaffInfovalue="",this.deptStaffDtosvlaue="",this.woTypesvalue="",this.billtextarea="",this.titleValue="",this.radio=""},getbilltypeandhandles:function(){var t=this;null==this.deptStaffInfo&&this.$api.server.getWOTypeAndDeptInfo().then(function(e){1e4==e.status?(t.deptStaffInfo=e.data.deptStaffInfo,t.woTypes=e.data.woTypes):3e4==e.status?t.$message.error(e.message):t.$message.error("未能接收到规定的Josn返回格式!")})},deptStaffInfovaluefun:function(t){var e=this;this.deptStaffDtosvlaue="",this.deptStaffInfo.forEach(function(a,s){a.deptCode==t&&(e.deptStaffDtos=a.deptStaffDtos)})}})},u=(i()({},r),i()({},r)),c={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"Idealwith"},[a("div",{staticClass:"Istartedheader"},[a("span",{staticClass:"pagelocation"},[t._v("工单管理/我处理的")]),t._v(" "),a("span",{staticClass:"pageTitle"},[t._v(t._s(t.tablabel))])]),t._v(" "),a("div",{staticClass:"contentbox"},[a("div",{staticClass:"tabBox"},t._l(t.tabBoxdata,function(e,s){return a("div",{key:"tabBox"+s,class:{tab:!0,tabactive:e.actiuve},on:{click:function(a){return t.actiuvetab(s,e.value)}}},[a("span",[t._v(t._s(e.label))])])}),0),t._v(" "),a("div",{staticClass:"tablelist"},[a("div",{staticClass:"searchbox"},[a("div",{staticClass:"selectInput"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.selectInput,expression:"selectInput"}],attrs:{type:"text",placeholder:"搜索工单号/创建人"},domProps:{value:t.selectInput},on:{input:function(e){e.target.composing||(t.selectInput=e.target.value)}}}),t._v(" "),a("i",{staticClass:"el-icon-search"}),t._v(" "),a("i",{directives:[{name:"show",rawName:"v-show",value:""!=t.selectInput,expression:"selectInput!=''"}],staticClass:"el-icon-circle-close",on:{click:t.clearIntput}}),t._v(" "),a("div",{staticClass:"selectbotton",on:{click:t.inputchange}},[a("span",[t._v("搜索")])]),t._v(" "),a("div",{staticClass:"selectbox"},[a("el-date-picker",{staticClass:"select1",attrs:{type:"daterange",align:"right","value-format":"yyyy-MM-dd",clearable:!0,"unlink-panels":"","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","picker-options":t.pickerOptions},on:{change:t.datechange},model:{value:t.datavalue,callback:function(e){t.datavalue=e},expression:"datavalue"}}),t._v(" "),a("el-select",{staticClass:"select",attrs:{placeholder:"工单分类",clearable:!0},on:{change:t.billtypechange},model:{value:t.billtypevalue,callback:function(e){t.billtypevalue=e},expression:"billtypevalue"}},t._l(t.billtype,function(t){return a("el-option",{key:t.id,attrs:{label:t.dictValue,value:t.id}})}),1)],1)]),t._v(" "),a("div",{staticClass:"biludbotton",on:{click:t.relaunched}},[a("span",[t._v("创建工单")])])]),t._v(" "),a("div",{staticClass:"table"},[a("el-table",{ref:"multipleTable",attrs:{data:t.tableData,"tooltip-effect":"dark",size:"small",height:"661"}},[a("el-table-column",{attrs:{prop:"code","show-overflow-tooltip":"",width:"100"},scopedSlots:t._u([{key:"header",fn:function(e){return[a("span",{staticClass:"hearder"},[t._v("工单编号")])]}},{key:"default",fn:function(e){return[a("span",{staticClass:"tabletext"},[t._v(t._s(t.tableData[e.$index].code))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"priority","show-overflow-tooltip":"",width:"150"},scopedSlots:t._u([{key:"header",fn:function(e){return[a("span",{staticClass:"hearder"},[t._v("优先级")])]}},{key:"default",fn:function(e){return[1==t.tableData[e.$index].priority?a("el-tag",{attrs:{type:"success"}},[t._v("低(3天内)")]):t._e(),t._v(" "),2==t.tableData[e.$index].priority?a("el-tag",[t._v("中(当天)")]):t._e(),t._v(" "),3==t.tableData[e.$index].priority?a("el-tag",{attrs:{type:"danger"}},[t._v("高(1个小时内)")]):t._e(),t._v(" "),4==t.tableData[e.$index].priority?a("el-tag",{attrs:{type:"danger"}},[t._v("最高(15分钟)")]):t._e()]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"status","show-overflow-tooltip":"",width:"100"},scopedSlots:t._u([{key:"header",fn:function(e){return[a("span",{staticClass:"hearder"},[t._v("状态")])]}},{key:"default",fn:function(e){return[0==t.tableData[e.$index].status?a("span",{staticClass:"tabletext"},[t._v("待接受")]):t._e(),t._v(" "),1==t.tableData[e.$index].status?a("span",{staticClass:"tabletext"},[t._v("已接受")]):t._e(),t._v(" "),2==t.tableData[e.$index].status?a("span",{staticClass:"tabletext"},[t._v("已退回")]):t._e(),t._v(" "),3==t.tableData[e.$index].status?a("span",{staticClass:"tabletext"},[t._v("已完成")]):t._e(),t._v(" "),4==t.tableData[e.$index].status?a("span",{staticClass:"tabletext"},[t._v("已关闭")]):t._e()]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"creater","show-overflow-tooltip":"",width:"100"},scopedSlots:t._u([{key:"header",fn:function(e){return[a("span",{staticClass:"hearder"},[t._v("创建人")])]}},{key:"default",fn:function(e){return[a("span",{staticClass:"tabletext"},[t._v(t._s(t.tableData[e.$index].creater))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"handler","show-overflow-tooltip":"",width:"100"},scopedSlots:t._u([{key:"header",fn:function(e){return[a("span",{staticClass:"hearder"},[t._v("处理人")])]}},{key:"default",fn:function(e){return[a("span",{staticClass:"tabletext"},[t._v(t._s(t.tableData[e.$index].handler))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"createTime","show-overflow-tooltip":"",width:"200"},scopedSlots:t._u([{key:"header",fn:function(e){return[a("span",{staticClass:"hearder"},[t._v("创建时间")])]}},{key:"default",fn:function(e){return[a("span",{staticClass:"tabletext"},[t._v(t._s(t.tableData[e.$index].createTime))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"type","show-overflow-tooltip":"",width:"200"},scopedSlots:t._u([{key:"header",fn:function(e){return[a("span",{staticClass:"hearder"},[t._v("工单分类")])]}},{key:"default",fn:function(e){return[a("span",{staticClass:"tabletext"},[t._v(t._s(t.tableData[e.$index].type))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"title","show-overflow-tooltip":""},scopedSlots:t._u([{key:"header",fn:function(e){return[a("span",{staticClass:"hearder"},[t._v("标题")])]}},{key:"default",fn:function(e){return[a("span",{staticClass:"tabletext"},[t._v(t._s(t.tableData[e.$index].title))])]}}])}),t._v(" "),a("el-table-column",{attrs:{fixed:"right",width:"100"},scopedSlots:t._u([{key:"header",fn:function(e){return[a("span",{staticClass:"hearder"},[t._v("操作")])]}},{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text",size:"small"},nativeOn:{click:function(a){return a.preventDefault(),t.showbillDetail(t.tableData[e.$index].code,t.tableData[e.$index].userId)}}},[t._v("\n\t\t\t\t\t\t\t详情\n\t\t\t\t\t\t")])]}}])})],1)],1),t._v(" "),a("div",{staticClass:"page"},[a("span",[t._v("共 "+t._s(t.total)+" 条")]),t._v("\n\t\t\t\t \n\t\t\t\t"),a("el-pagination",{attrs:{background:"",layout:"prev, pager, next",total:t.total,"page-size":t.pagesize,"current-page":t.pageindex,background:!1},on:{"current-change":t.change}})],1)])]),t._v(" "),a("transition",{attrs:{name:"slide-workorderdetail"}},[t.workorderdetail?a("workorderdetail",{ref:"workorderdetail"}):t._e()],1),t._v(" "),a("el-dialog",{attrs:{title:"填写信息",visible:t.relaunchedVisible,width:"442px","before-close":t.relaunchedClose,"modal-append-to-body":!0,"append-to-body":!0},on:{"update:visible":function(e){t.relaunchedVisible=e}}},[a("div",{staticClass:"fromBox"},[a("div",{staticClass:"intputBox"},[a("span",{staticClass:"frominputTitle"},[t._v("工单分类")]),t._v(" "),a("el-select",{staticClass:"billType",attrs:{placeholder:"请选择工单分类"},model:{value:t.woTypesvalue,callback:function(e){t.woTypesvalue=e},expression:"woTypesvalue"}},t._l(t.woTypes,function(t){return a("el-option",{key:t.dictKey,attrs:{label:t.dictValue,value:t.id}})}),1)],1),t._v(" "),a("div",{staticClass:"intputBox",staticStyle:{"margin-top":"20px"}},[a("span",{staticClass:"frominputTitle"},[t._v("标题")]),t._v(" "),a("el-input",{staticClass:"billfrominputTitle",attrs:{placeholder:""},model:{value:t.titleValue,callback:function(e){t.titleValue=e},expression:"titleValue"}})],1),t._v(" "),a("div",{staticClass:"intputBox",staticStyle:{"margin-top":"20px"}},[a("span",{staticClass:"frominputTitle"},[t._v("描述")]),t._v(" "),a("el-input",{staticClass:"billdescription",attrs:{type:"textarea",rows:4,placeholder:""},model:{value:t.billtextarea,callback:function(e){t.billtextarea=e},expression:"billtextarea"}})],1),t._v(" "),a("div",{staticClass:"intputBox",staticStyle:{"margin-top":"20px"}},[a("span",{staticClass:"frominputTitle"},[t._v("处理人")]),t._v(" "),a("el-select",{staticClass:"billhandler",attrs:{placeholder:"请选择部门"},on:{change:t.deptStaffInfovaluefun},model:{value:t.deptStaffInfovalue,callback:function(e){t.deptStaffInfovalue=e},expression:"deptStaffInfovalue"}},t._l(t.deptStaffInfo,function(t){return a("el-option",{key:t.deptCode,attrs:{label:t.deptName,value:t.deptCode}})}),1),t._v(" "),a("el-select",{staticClass:"billhandler",attrs:{placeholder:"请选择部门处理人"},model:{value:t.deptStaffDtosvlaue,callback:function(e){t.deptStaffDtosvlaue=e},expression:"deptStaffDtosvlaue"}},t._l(t.deptStaffDtos,function(t){return a("el-option",{key:t.adminId,attrs:{label:t.name,value:t.adminId}})}),1)],1),t._v(" "),a("div",{staticClass:"intputBox",staticStyle:{"margin-top":"20px"}},[a("span",{staticClass:"frominputTitle"},[t._v("优先级")]),t._v(" "),a("div",{staticClass:"billpriority"},[a("el-radio-group",{model:{value:t.radio,callback:function(e){t.radio=e},expression:"radio"}},[a("el-radio",{staticClass:"priority",attrs:{label:1}},[t._v("低(3天内)")]),t._v(" "),a("el-radio",{staticClass:"priority",attrs:{label:2}},[t._v("中(当天)")]),t._v(" "),a("el-radio",{staticClass:"priority",attrs:{label:3}},[t._v("高(1个小时内)")]),t._v(" "),a("el-radio",{staticClass:"priority",attrs:{label:4}},[t._v("最高(15分钟内)")])],1)],1)])]),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:t.relaunchedClose}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.relaunchedconfirm}},[t._v("确 定")])],1)])],1)},staticRenderFns:[]};var d=a("jadU")(u,c,!1,function(t){a("1Mu6")},"data-v-1f484f3a",null);e.default=d.exports}});
//# sourceMappingURL=12.a42af4afafce9dc6a7ff.js.map