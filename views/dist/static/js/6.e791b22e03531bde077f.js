webpackJsonp([6],{"96FG":function(t,a,s){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var e=s("p4Oo"),l=s.n(e),n=s("iKzx"),i=s.n(n),o=s("CGGE"),c=s("d1n3"),r=s("fXyh"),d={name:"callenter",components:{workorderdetail:c.a},data:function(){return{callDuration:"00:00:00",name:"林油价(算法计算框架双方的军事回复接口是否设计的)",phonenumber:"15897710005",todaycall:[],todaycallindex:null,UserInfo:{},customerWOInfo:[],callInfo:{},purchasedList:[],tableData:[],relaunchedVisible:!1,deptStaffInfo:null,deptStaffInfovalue:"",deptStaffDtos:null,deptStaffDtosvlaue:"",woTypes:null,woTypesvalue:"",billtextarea:"",titleValue:"",radio:"",workorderdetail:!1,chCallin:""}},created:function(){},mounted:function(){o.a.backlogin(this)&&this.init()},computed:l()({},Object(r.b)("serverModule",["callwindow"])),methods:l()({},Object(r.c)("serverModule",{SETLOAD:"SETLOAD"}),{init:function(){this.getcallcenterdata(1,"","","")},showbillDetail:function(t,a){var s=this;this.workorderdetail=!0,this.SETLOAD(!0),this.$nextTick(function(){setTimeout(function(){s.$refs.workorderdetail.getDetaildata(t,a,"1")},300)})},closeworkorderdetail:function(){this.workorderdetail=!1,this.getcalldetail(this.chCallin)},todaycallfun:function(t){null!=this.todaycallindex?(this.todaycall[t].active=!0,this.getcalldetail(this.todaycall[t].chCallin),this.todaycall[this.todaycallindex].active=!1,this.todaycallindex=t):(this.todaycall[t].active=!0,this.getcalldetail(this.todaycall[t].chCallin),this.todaycallindex=t)},getcallcenterdata:function(t,a,s,e){var l=this,n=this;this.SETLOAD(!0),this.$api.server.callList(t,a,s,e).then(function(t){if(1e4==t.status){if(t.data.data.length>0)if(3==n.callwindow.ifshow)t.data.data.forEach(function(t,a){0==a?(t.active=!0,n.getcalldetail(t.chCallin),n.chCallin=t.chCallin,l.todaycallindex=0):t.active=!1});else{t.data.data.forEach(function(t,a){t.active=!1});var a=JSON.parse(i()(l.callwindow));l.getcalldetail(a.chCallin),l.chCallin=a.chCallin}else if(3==l.callwindow.ifshow)l.SETLOAD(!1);else{var s=JSON.parse(i()(l.callwindow));l.getcalldetail(s.chCallin),l.chCallin=s.chCallin}l.todaycall=t.data.data}else{if(3!=l.callwindow.ifshow){var e=JSON.parse(i()(l.callwindow));l.getcalldetail(e.chCallin),l.chCallin=e.chCallin}else l.SETLOAD(!1);3e4==t.status?l.$message.error(t.message):l.$message.error("未能接收到规定的Josn返回格式!")}})},getcalldetail:function(t){var a=this;""!=t&&(this.SETLOAD(!0),this.chCallin=t,this.$api.server.callCenterdetail(t,1).then(function(t){1e4==t.status?(a.callInfo=t.data.callInfo,a.$refs.audio.src=a.callInfo.soundUrl,a.UserInfo=t.data.UserInfo,a.customerWOInfo=t.data.customerWOInfo,a.purchasedList=t.data.purchasedList,a.$nextTick(function(){a.SETLOAD(!1)})):(a.SETLOAD(!1),3e4==t.status?a.$message.error(t.message):a.$message.error("未能接收到规定的Josn返回格式!"))}))},relaunched:function(){this.relaunchedVisible=!0,this.getbilltypeandhandles()},relaunchedconfirm:function(){var t=this;""!=this.deptStaffInfovalue&&""!=this.deptStaffDtosvlaue&&""!=this.woTypesvalue&&""!=this.billtextarea&&""!=this.titleValue&&""!=this.radio?(this.relaunchedVisible=!1,this.SETLOAD(!0),this.$api.server.addWorkOrder(this.woTypesvalue,this.radio,this.titleValue,this.billtextarea,this.UserInfo.userId,this.deptStaffDtosvlaue,"").then(function(a){1e4==a.status?(t.$message.success("已经成功创建工单任务"),t.SETLOAD(!1),t.getcalldetail(t.chCallin)):(t.SETLOAD(!1),3e4==a.status?t.$message.error(a.message):t.$message.error("未能接收到规定的Josn返回格式!"))})):this.$message.warning("请填写完成的信息!")},relaunchedClose:function(){this.relaunchedVisible=!1,this.deptStaffInfovalue="",this.deptStaffDtosvlaue="",this.woTypesvalue="",this.billtextarea="",this.titleValue="",this.radio=""},getbilltypeandhandles:function(){var t=this;null==this.deptStaffInfo&&this.$api.server.getWOTypeAndDeptInfo().then(function(a){1e4==a.status?(t.deptStaffInfo=a.data.deptStaffInfo,t.woTypes=a.data.woTypes):3e4==a.status?t.$message.error(a.message):t.$message.error("未能接收到规定的Josn返回格式!")})},deptStaffInfovaluefun:function(t){var a=this;this.deptStaffDtosvlaue="",this.deptStaffInfo.forEach(function(s,e){s.deptCode==t&&(a.deptStaffDtos=s.deptStaffDtos)})}})},u=(l()({},d),l()({},d)),v={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"callenter"},[e("div",{staticClass:"leftcontentbox"},[1==t.callwindow.ifshow||3==t.callwindow.ifshow?e("div",{staticClass:"callStatus"},[t._m(0)]):t._e(),t._v(" "),2==t.callwindow.ifshow?e("div",{staticClass:"callStatus1"},[e("div",{staticClass:"callDuration"},[e("span",{staticClass:"title"},[t._v("通话中")]),t._v(" "),e("span",{staticClass:"time"},[t._v(t._s(t.callwindow.timestr))])]),t._v(" "),e("div",{staticClass:"userInfo"},[e("img",{attrs:{src:t.callwindow.imgurl}}),t._v(" "),e("div",{staticClass:"name_callNo"},[e("span",{staticClass:"name",attrs:{title:t.name}},[t._v(t._s(t.callwindow.username))]),t._v(" "),e("span",{staticClass:"phonenumber"},[t._v(t._s(t.callwindow.phone))])])])]):t._e(),t._v(" "),e("div",{staticClass:"calllist"},[e("div",{staticClass:"title"},[e("span",{staticClass:"text"},[t._v("今日通话 "),e("span",{staticClass:"number"},[t._v(t._s(t.todaycall.length))])])]),t._v(" "),e("div",{staticClass:"list"},t._l(t.todaycall,function(a,s){return e("div",{key:"usermsg"+s,class:{usermsg:!0,usermsgactive:a.active},on:{click:function(a){return t.todaycallfun(s)}}},[e("div",{staticClass:"msg"},[e("img",{attrs:{src:a.headPortrait}}),t._v(" "),e("div",{staticClass:"name_callNo"},[e("span",{staticClass:"name",attrs:{title:a.name}},[t._v(t._s(a.customerName))]),t._v(" "),e("span",{staticClass:"phonenumber"},[t._v(t._s(a.phone))])])]),t._v(" "),e("span",{staticClass:"times"},[t._v(t._s(a.beginTime.split(" ")[1].slice(0,5)))])])}),0)])]),t._v(" "),e("div",{staticClass:"rightcontentox"},[e("div",{staticClass:"callDetail"},[t._m(1),t._v(" "),e("div",{staticClass:"msg"},[e("div",{staticClass:"msgcontent"},[e("span",{staticClass:"title"},[t._v("呼入号码:")]),t._v(" "),e("span",{staticClass:"text"},[t._v(t._s(t.callInfo.phone))])]),t._v(" "),e("div",{staticClass:"msgcontent"},[e("span",{staticClass:"title"},[t._v("开始时间:")]),t._v(" "),e("span",{staticClass:"text"},[t._v(t._s(t.callInfo.beginTime))])]),t._v(" "),e("div",{staticClass:"msgcontent"},[e("span",{staticClass:"title"},[t._v("结束时间:")]),t._v(" "),e("span",{staticClass:"text"},[t._v(t._s(t.callInfo.endTime))])]),t._v(" "),e("div",{staticClass:"msgcontent"},[e("span",{staticClass:"title"},[t._v("服务时长:")]),t._v(" "),e("span",{staticClass:"text"},[t._v(t._s(t.callInfo.serviceLen))])]),t._v(" "),e("div",{staticClass:"msgcontent"},[e("span",{staticClass:"title"},[t._v("接待客服:")]),t._v(" "),e("span",{staticClass:"text"},[t._v(t._s(t.callInfo.seatName))])]),t._v(" "),e("div",{staticClass:"msgcontent audioify"},[e("span",{staticClass:"title"},[t._v("服务录音:")]),t._v(" "),e("audio",{ref:"audio",attrs:{controls:"controls",src:t.callInfo.soundUrl}})])])]),t._v(" "),e("div",{staticClass:"callDetail"},[t._m(2),t._v(" "),e("div",{staticClass:"msg"},[e("div",{staticClass:"msgcontent"},[e("span",{staticClass:"title"},[t._v("头像:")]),t._v(" "),e("img",{attrs:{src:t.UserInfo.headPortrait}})]),t._v(" "),e("div",{staticClass:"msgcontent"},[e("span",{staticClass:"title"},[t._v("姓名:")]),t._v(" "),e("span",{staticClass:"text"},[t._v(t._s(t.UserInfo.userName))])]),t._v(" "),e("div",{staticClass:"msgcontent"},[e("span",{staticClass:"title"},[t._v("备注:")]),t._v(" "),e("span",{staticClass:"text"},[t._v(t._s(t.UserInfo.remarkName))])]),t._v(" "),e("div",{staticClass:"msgcontent"},[e("span",{staticClass:"title"},[t._v("手机:")]),t._v(" "),e("span",{staticClass:"text"},[t._v(t._s(t.UserInfo.telephone))])]),t._v(" "),e("div",{staticClass:"msgcontent"},[e("span",{staticClass:"title"},[t._v("车牌号:")]),t._v(" "),e("span",{staticClass:"text"},[t._v(t._s(t.UserInfo.carPlateNo))])])])]),t._v(" "),e("div",{staticClass:"callDetail"},[t._m(3),t._v(" "),e("div",{staticClass:"msg"},t._l(t.purchasedList,function(a,s){return e("div",{key:"msgcontent"+s,staticClass:"msgcontent"},[e("span",{staticClass:"title"},[t._v("服务"+t._s(s+1)+":")]),t._v(" "),e("span",{staticClass:"text",attrs:{title:a.purchasedServiceName}},[t._v(t._s(a.purchasedServiceName))])])}),0)]),t._v(" "),e("div",{staticClass:"billorder"},[e("div",{staticClass:"title"},[e("span",{staticClass:"text"},[t._v("工单")]),t._v(" "),e("div",{staticClass:"buildbtn",on:{click:t.relaunched}},[e("span",[t._v("创建工单")])])]),t._v(" "),t.customerWOInfo.length>0?e("div",{staticClass:"table"},[e("el-table",{ref:"multipleTable",attrs:{data:t.customerWOInfo,"tooltip-effect":"dark",size:"small",height:"280"}},[e("el-table-column",{attrs:{prop:"code","show-overflow-tooltip":"",width:"100"},scopedSlots:t._u([{key:"header",fn:function(a){return[e("span",{staticClass:"hearder"},[t._v("工单编号")])]}},{key:"default",fn:function(a){return[e("span",{staticClass:"tabletext"},[t._v(t._s(t.customerWOInfo[a.$index].code))])]}}],null,!1,3076974918)}),t._v(" "),e("el-table-column",{attrs:{prop:"priority","show-overflow-tooltip":"",width:"150"},scopedSlots:t._u([{key:"header",fn:function(a){return[e("span",{staticClass:"hearder"},[t._v("优先级")])]}},{key:"default",fn:function(a){return[1==t.customerWOInfo[a.$index].priority?e("el-tag",{attrs:{type:"success"}},[t._v("低(3天内)")]):t._e(),t._v(" "),2==t.customerWOInfo[a.$index].priority?e("el-tag",[t._v("中(当天)")]):t._e(),t._v(" "),3==t.customerWOInfo[a.$index].priority?e("el-tag",{attrs:{type:"danger"}},[t._v("高(1个小时内)")]):t._e(),t._v(" "),4==t.customerWOInfo[a.$index].priority?e("el-tag",{attrs:{type:"danger"}},[t._v("最高(15分钟内)")]):t._e()]}}],null,!1,2528316560)}),t._v(" "),e("el-table-column",{attrs:{prop:"status","show-overflow-tooltip":"",width:"100"},scopedSlots:t._u([{key:"header",fn:function(a){return[e("span",{staticClass:"hearder"},[t._v("状态")])]}},{key:"default",fn:function(a){return[0==t.customerWOInfo[a.$index].status?e("span",{staticClass:"tabletext"},[t._v("待接受")]):t._e(),t._v(" "),1==t.customerWOInfo[a.$index].status?e("span",{staticClass:"tabletext"},[t._v("已接受")]):t._e(),t._v(" "),2==t.customerWOInfo[a.$index].status?e("span",{staticClass:"tabletext"},[t._v("已退回")]):t._e(),t._v(" "),3==t.customerWOInfo[a.$index].status?e("span",{staticClass:"tabletext"},[t._v("已完成")]):t._e(),t._v(" "),4==t.customerWOInfo[a.$index].status?e("span",{staticClass:"tabletext"},[t._v("已关闭")]):t._e()]}}],null,!1,478872198)}),t._v(" "),e("el-table-column",{attrs:{prop:"creater","show-overflow-tooltip":"",width:"100"},scopedSlots:t._u([{key:"header",fn:function(a){return[e("span",{staticClass:"hearder"},[t._v("创建人")])]}},{key:"default",fn:function(a){return[e("span",{staticClass:"tabletext"},[t._v(t._s(t.customerWOInfo[a.$index].creater))])]}}],null,!1,3229699095)}),t._v(" "),e("el-table-column",{attrs:{prop:"handler","show-overflow-tooltip":"",width:"100"},scopedSlots:t._u([{key:"header",fn:function(a){return[e("span",{staticClass:"hearder"},[t._v("处理人")])]}},{key:"default",fn:function(a){return[e("span",{staticClass:"tabletext"},[t._v(t._s(t.customerWOInfo[a.$index].handler))])]}}],null,!1,3020381370)}),t._v(" "),e("el-table-column",{attrs:{prop:"createTime","show-overflow-tooltip":"",width:"150"},scopedSlots:t._u([{key:"header",fn:function(a){return[e("span",{staticClass:"hearder"},[t._v("创建时间")])]}},{key:"default",fn:function(a){return[e("span",{staticClass:"tabletext"},[t._v(t._s(t.customerWOInfo[a.$index].createTime))])]}}],null,!1,4026508680)}),t._v(" "),e("el-table-column",{attrs:{prop:"type","show-overflow-tooltip":"",width:"200"},scopedSlots:t._u([{key:"header",fn:function(a){return[e("span",{staticClass:"hearder"},[t._v("工单分类")])]}},{key:"default",fn:function(a){return[e("span",{staticClass:"tabletext"},[t._v(t._s(t.customerWOInfo[a.$index].type))])]}}],null,!1,1546899727)}),t._v(" "),e("el-table-column",{attrs:{prop:"title","show-overflow-tooltip":""},scopedSlots:t._u([{key:"header",fn:function(a){return[e("span",{staticClass:"hearder"},[t._v("标题")])]}},{key:"default",fn:function(a){return[e("span",{staticClass:"tabletext"},[t._v(t._s(t.customerWOInfo[a.$index].title))])]}}],null,!1,3826233477)}),t._v(" "),e("el-table-column",{attrs:{fixed:"right",width:"100"},scopedSlots:t._u([{key:"header",fn:function(a){return[e("span",{staticClass:"hearder"},[t._v("操作")])]}},{key:"default",fn:function(a){return[e("el-button",{attrs:{type:"text",size:"small"},nativeOn:{click:function(s){return s.preventDefault(),t.showbillDetail(t.customerWOInfo[a.$index].code,t.customerWOInfo[a.$index].userId)}}},[t._v("\n\t\t\t\t\t\t\t详情\n\t\t\t\t\t\t")])]}}],null,!1,1468779784)})],1)],1):e("div",{staticClass:"empty"},[e("img",{attrs:{src:s("BONd")}}),t._v(" "),e("span",[t._v("暂无工单")])])])]),t._v(" "),e("transition",{attrs:{name:"slide-workorderdetail"}},[t.workorderdetail?e("workorderdetail",{ref:"workorderdetail"}):t._e()],1),t._v(" "),e("el-dialog",{attrs:{title:"填写信息",visible:t.relaunchedVisible,width:"442px","before-close":t.relaunchedClose,"modal-append-to-body":!0,"append-to-body":!0},on:{"update:visible":function(a){t.relaunchedVisible=a}}},[e("div",{staticClass:"fromBox"},[e("div",{staticClass:"intputBox"},[e("span",{staticClass:"frominputTitle"},[t._v("工单分类")]),t._v(" "),e("el-select",{staticClass:"billType",attrs:{placeholder:"请选择工单分类"},model:{value:t.woTypesvalue,callback:function(a){t.woTypesvalue=a},expression:"woTypesvalue"}},t._l(t.woTypes,function(t){return e("el-option",{key:t.dictKey,attrs:{label:t.dictValue,value:t.id}})}),1)],1),t._v(" "),e("div",{staticClass:"intputBox",staticStyle:{"margin-top":"20px"}},[e("span",{staticClass:"frominputTitle"},[t._v("标题")]),t._v(" "),e("el-input",{staticClass:"billfrominputTitle",attrs:{placeholder:""},model:{value:t.titleValue,callback:function(a){t.titleValue=a},expression:"titleValue"}})],1),t._v(" "),e("div",{staticClass:"intputBox",staticStyle:{"margin-top":"20px"}},[e("span",{staticClass:"frominputTitle"},[t._v("描述")]),t._v(" "),e("el-input",{staticClass:"billdescription",attrs:{type:"textarea",rows:4,placeholder:""},model:{value:t.billtextarea,callback:function(a){t.billtextarea=a},expression:"billtextarea"}})],1),t._v(" "),e("div",{staticClass:"intputBox",staticStyle:{"margin-top":"20px"}},[e("span",{staticClass:"frominputTitle"},[t._v("处理人")]),t._v(" "),e("el-select",{staticClass:"billhandler",attrs:{placeholder:"请选择部门"},on:{change:t.deptStaffInfovaluefun},model:{value:t.deptStaffInfovalue,callback:function(a){t.deptStaffInfovalue=a},expression:"deptStaffInfovalue"}},t._l(t.deptStaffInfo,function(t){return e("el-option",{key:t.deptCode,attrs:{label:t.deptName,value:t.deptCode}})}),1),t._v(" "),e("el-select",{staticClass:"billhandler",attrs:{placeholder:"请选择部门处理人"},model:{value:t.deptStaffDtosvlaue,callback:function(a){t.deptStaffDtosvlaue=a},expression:"deptStaffDtosvlaue"}},t._l(t.deptStaffDtos,function(t){return e("el-option",{key:t.adminId,attrs:{label:t.name,value:t.adminId}})}),1)],1),t._v(" "),e("div",{staticClass:"intputBox",staticStyle:{"margin-top":"20px"}},[e("span",{staticClass:"frominputTitle"},[t._v("优先级")]),t._v(" "),e("div",{staticClass:"billpriority"},[e("el-radio-group",{model:{value:t.radio,callback:function(a){t.radio=a},expression:"radio"}},[e("el-radio",{staticClass:"priority",attrs:{label:1}},[t._v("低(3天内)")]),t._v(" "),e("el-radio",{staticClass:"priority",attrs:{label:2}},[t._v("中(当天)")]),t._v(" "),e("el-radio",{staticClass:"priority",attrs:{label:3}},[t._v("高(1个小时内)")]),t._v(" "),e("el-radio",{staticClass:"priority",attrs:{label:4}},[t._v("最高(15分钟内)")])],1)],1)])]),t._v(" "),e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:t.relaunchedClose}},[t._v("取 消")]),t._v(" "),e("el-button",{attrs:{type:"primary"},on:{click:t.relaunchedconfirm}},[t._v("确 定")])],1)])],1)},staticRenderFns:[function(){var t=this.$createElement,a=this._self._c||t;return a("span",{staticClass:"title"},[a("img",{attrs:{src:s("B9vX")}}),a("span",[this._v("等待接通中")])])},function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"title"},[a("span",[this._v("通话信息")])])},function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"title"},[a("span",[this._v("客户信息")])])},function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"title"},[a("span",[this._v("已购服务")])])}]};var f=s("jadU")(u,v,!1,function(t){s("zUlY")},"data-v-74f8d6ae",null);a.default=f.exports},B9vX:function(t,a){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAMAAABg3Am1AAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAABLFBMVEUAAACWn6qWn6qWn6qWn6qWn6qWn6qWn6qWn6qWn6qWn6qWn6qWn6qWn6qWn6qWn6qWn6qWn6qWn6qWn6qWn6qWn6qWn6qWn6qWn6qWn6qWn6qWn6qWn6qWn6qWn6qWn6qWn6qWn6qWn6qWn6qWn6qWn6qWn6qWn6qWn6qWn6qWn6qWn6qWn6qWn6qWn6qWn6qWn6qWn6qWn6qWn6qWn6qWn6qWn6qWn6qWn6qWn6qWn6qWn6qWn6qWn6qWn6qWn6qWn6qWn6qWn6qWn6qWn6qWn6qWn6qWn6qWn6qWn6qWn6qWn6qWn6qWn6qWn6qWn6qWn6qWn6qWn6qWn6qWn6qWn6qWn6qWn6qWn6qWn6qWn6qWn6qWn6qWn6qWn6qWn6qWn6qWn6qWn6oAAABFCaDEAAAAYnRSTlMADHPP+OKQD1Tl3x0Sr80FBMZyXekKs2bjwfv5E+rvA4OlqXDzaTEqAucvmEHmCAHZ7RGWhf05FPDYdZreU0gp2xXMFgnJ68sGPvxQ4ccbfhyx2rUh4L73nXcZLL1Y9kqeHo3UdGIAAAABYktHRACIBR1IAAAAB3RJTUUH5AQDDiwB4pyMKAAAAUhJREFUSMfd1FdTwkAUBeBLAFEQxIKgYKJiiQ1RLIgNUVAUEXtv+/9/hEHdzQ5kNodHPU95ON/c7NxsiP5ZPJrX5+8KwP3uHtZMMITVe8PsN5E+pB/tZyIDCBi0+2woBoBhCbA4ABIyGAHAqAySwLGTMmApdzAm93XDHURkMA6cYULqT0YBkBb1qWmgTjQjwCzUJ3OOg3kM0EInJ25mkYOlDAaWs1xo4AiNg5VVDAR0LnLgiDUO1jcwsJnnYgu5QVYKYnnbGMjsCLGLiT0B8vuYsL/Z4gEEUvbVLh0SHaXLleP4iUpUT+0Z1bPa98N5XSUuWHv8DQUwLh3EleqnECs7iGvVSzVqDkK5l5vbdnBHHYp79TpC3lZQcVmgJ9wCHlwAmY8+uZ94cgNEzyW7/1J371tDXos/9beCifStGO8fWT2Y+wTrfyZfxL29tiwhqzMAAAAASUVORK5CYII="},BONd:function(t,a,s){t.exports=s.p+"static/img/empty.b595b69.png"},zUlY:function(t,a){}});
//# sourceMappingURL=6.e791b22e03531bde077f.js.map